#pragma once
#include<iostream>
#include <winsock2.h>
#include <ws2tcpip.h>

class Command {
	FILE* pipe;
	int define_result(std::string& result);
	public:
		std::string remove_substring(std::string str, std::string demo);
		char* run_command(const char* cmd);
};

class OperateSocket{
	SOCKET socketC;
	bool moderun = false;
	bool wait_for_run();

	protected:
		int get_size_pkt();
		int send_func(char* data, int lenData);
		int recv_func(char* buf, int size);
		SOCKET get_socketC();
		void set_socketC(SOCKET s);
	
	public:
		OperateSocket(SOCKET socketC);
		void operate();
		
};

class ManagerFile : public OperateSocket{
	int size_file(FILE* file);
	public:
		ManagerFile(SOCKET socketC);
		int sendFile(LPSTR filename);
};
